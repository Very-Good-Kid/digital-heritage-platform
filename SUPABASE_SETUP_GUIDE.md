# Supabase PostgreSQL é…ç½®æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ ä½¿ç”¨**Supabase**å…è´¹PostgreSQLæ•°æ®åº“ï¼Œå®ç°æ•°æ®æ°¸ä¹…æŒä¹…åŒ–å­˜å‚¨ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹©Supabaseï¼Ÿ

âœ… **å®Œå…¨å…è´¹**ï¼š
- 500MBæ•°æ®åº“å­˜å‚¨
- æ— é™è¯·æ±‚
- æ°¸ä¹…å…è´¹ï¼ˆæ— è¯•ç”¨æœŸï¼‰

âœ… **æ•°æ®æŒä¹…åŒ–**ï¼š
- PostgreSQLæ•°æ®åº“ï¼ˆç”Ÿäº§çº§ï¼‰
- è‡ªåŠ¨å¤‡ä»½
- æ•°æ®æ°¸è¿œä¸ä¼šä¸¢å¤±

âœ… **æ˜“äºé›†æˆ**ï¼š
- æ ‡å‡†PostgreSQLè¿æ¥
- ä¸Flaskæ— ç¼é›†æˆ
- æ”¯æŒæ‰€æœ‰SQLåŠŸèƒ½

---

## å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1ï¼šæ³¨å†ŒSupabaseè´¦å·

1. è®¿é—® [https://supabase.com](https://supabase.com)
2. ç‚¹å‡» "Start your project"
3. ä½¿ç”¨GitHubè´¦å·ç™»å½•
4. åˆ›å»ºæ–°è´¦å·

### æ­¥éª¤2ï¼šåˆ›å»ºSupabaseé¡¹ç›®

1. ç‚¹å‡» "New Project"
2. å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
   - **Name**: `digital-heritage-platform`
   - **Database Password**: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆè®°ä½å®ƒï¼ï¼‰
   - **Region**: é€‰æ‹©æœ€è¿‘çš„åŒºåŸŸï¼ˆå¦‚ Northeast Asia (Tokyo)ï¼‰
   - **Pricing Plan**: é€‰æ‹© **Free** å…è´¹è®¡åˆ’
3. ç‚¹å‡» "Create new project"
4. ç­‰å¾…é¡¹ç›®åˆ›å»ºï¼ˆçº¦2åˆ†é’Ÿï¼‰

### æ­¥éª¤3ï¼šè·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯

åˆ›å»ºå®Œæˆåï¼š

1. åœ¨é¡¹ç›®å·¦ä¾§èœå•ç‚¹å‡» **Settings** â†’ **Database**
2. æ‰¾åˆ° **Connection string** éƒ¨åˆ†
3. é€‰æ‹© **URI** æ ‡ç­¾
4. å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   ```
   postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
   ```

**ç¤ºä¾‹**ï¼š
```
postgresql://postgres:your_password@db.abc123def456.supabase.co:5432/postgres
```

### æ­¥éª¤4ï¼šåœ¨Renderä¸­é…ç½®ç¯å¢ƒå˜é‡

1. ç™»å½• [Render Dashboard](https://dashboard.render.com)
2. æ‰¾åˆ°ä½ çš„åº”ç”¨
3. ç‚¹å‡» "Environment" æ ‡ç­¾
4. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```
DATABASE_URL=postgresql://postgres:your_password@db.abc123def456.supabase.co:5432/postgres
FLASK_ENV=production
SECRET_KEY=your-secure-secret-key-here
```

**ç”ŸæˆSECRET_KEY**ï¼š
```bash
python -c "import secrets; print(secrets.token_hex(32))"
```

### æ­¥éª¤5ï¼šç­‰å¾…Renderè‡ªåŠ¨éƒ¨ç½²

Renderä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ä»£ç æ›´æ–°å¹¶é‡æ–°éƒ¨ç½²ï¼Œçº¦2-5åˆ†é’Ÿã€‚

### æ­¥éª¤6ï¼šéªŒè¯æ•°æ®åº“è¿æ¥

éƒ¨ç½²å®Œæˆåï¼š

1. è®¿é—®ä½ çš„åº”ç”¨ï¼š`https://ä½ çš„åº”ç”¨å.onrender.com`
2. å°è¯•æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·
3. å¦‚æœæ³¨å†ŒæˆåŠŸï¼Œè¯´æ˜æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼

---

## æ•°æ®åº“ç®¡ç†

### æŸ¥çœ‹æ•°æ®åº“è¡¨

1. ç™»å½• [Supabase Dashboard](https://supabase.com/dashboard)
2. é€‰æ‹©ä½ çš„é¡¹ç›®
3. ç‚¹å‡»å·¦ä¾§èœå•çš„ **Table Editor**
4. ä½ ä¼šçœ‹åˆ°æ‰€æœ‰è‡ªåŠ¨åˆ›å»ºçš„è¡¨ï¼š
   - `users` - ç”¨æˆ·è¡¨
   - `digital_assets` - æ•°å­—èµ„äº§è¡¨
   - `digital_wills` - æ•°å­—é—å˜±è¡¨
   - `platform_policies` - å¹³å°æ”¿ç­–è¡¨
   - `stories` - æ•…äº‹è¡¨
   - `faqs` - FAQè¡¨

### ç›´æ¥ç®¡ç†æ•°æ®

**æ·»åŠ ç®¡ç†å‘˜è´¦å·**ï¼š

1. ç‚¹å‡» `users` è¡¨
2. ç‚¹å‡» "Insert row"
3. å¡«å†™ä¿¡æ¯ï¼š
   - `username`: `admin`
   - `email`: `admin@example.com`
   - `password_hash`: éœ€è¦ç”Ÿæˆå“ˆå¸Œå€¼
   - `is_admin`: `true`
   - `is_active`: `true`

**ç”Ÿæˆå¯†ç å“ˆå¸Œ**ï¼š
```python
from werkzeug.security import generate_password_hash
print(generate_password_hash('Admin@2024!'))
```

### æ‰§è¡ŒSQLæŸ¥è¯¢

1. ç‚¹å‡»å·¦ä¾§èœå•çš„ **SQL Editor**
2. ç‚¹å‡» "New query"
3. ç¼–å†™å¹¶æ‰§è¡ŒSQLï¼š

```sql
-- æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
SELECT id, username, email, is_admin, is_active FROM users;

-- å°†ç”¨æˆ·è®¾ç½®ä¸ºç®¡ç†å‘˜
UPDATE users SET is_admin = true WHERE username = 'admin';

-- æŸ¥çœ‹æ‰€æœ‰é—å˜±
SELECT * FROM digital_wills;

-- ç»Ÿè®¡ç”¨æˆ·æ•°é‡
SELECT COUNT(*) FROM users;
```

---

## å¤‡ä»½å’Œæ¢å¤

### è‡ªåŠ¨å¤‡ä»½

Supabaseå…è´¹è®¡åˆ’æä¾›ï¼š
- æ¯å¤©1æ¬¡è‡ªåŠ¨å¤‡ä»½
- ä¿ç•™7å¤©å¤‡ä»½

### æ‰‹åŠ¨å¤‡ä»½

1. ç‚¹å‡» **Settings** â†’ **Database**
2. æ»šåŠ¨åˆ° "Backups" éƒ¨åˆ†
3. ç‚¹å‡» "Create backup"

### æ¢å¤å¤‡ä»½

1. åœ¨ "Backups" éƒ¨åˆ†é€‰æ‹©è¦æ¢å¤çš„å¤‡ä»½
2. ç‚¹å‡» "Restore"
3. ç¡®è®¤æ¢å¤æ“ä½œ

---

## ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—

1. ç‚¹å‡»å·¦ä¾§èœå•çš„ **Logs**
2. é€‰æ‹© "Database" æ ‡ç­¾
3. æŸ¥çœ‹å®æ—¶æ•°æ®åº“æ´»åŠ¨

### ç›‘æ§æ€§èƒ½

1. ç‚¹å‡»å·¦ä¾§èœå•çš„ **Database**
2. æŸ¥çœ‹ "Database usage" éƒ¨åˆ†
3. ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µå’Œè¿æ¥æ•°

---

## å®‰å…¨å»ºè®®

### 1. ä¿æŠ¤æ•°æ®åº“å¯†ç 

âš ï¸ **é‡è¦**ï¼š
- ä¸è¦å°†æ•°æ®åº“å¯†ç æäº¤åˆ°ä»£ç ä»“åº“
- ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- å®šæœŸæ›´æ¢æ•°æ®åº“å¯†ç 

### 2. é™åˆ¶è®¿é—®

åœ¨Supabaseä¸­è®¾ç½®è®¿é—®é™åˆ¶ï¼š

1. ç‚¹å‡» **Settings** â†’ **Database**
2. æ»šåŠ¨åˆ° "Connection pooling"
3. é…ç½®è¿æ¥æ± è®¾ç½®
4. å¯ç”¨ "Restrict database access"

### 3. å®šæœŸå¤‡ä»½

- ç¡®ä¿è‡ªåŠ¨å¤‡ä»½å·²å¯ç”¨
- å®šæœŸæ‰‹åŠ¨åˆ›å»ºå¤‡ä»½
- ä¸‹è½½é‡è¦å¤‡ä»½åˆ°æœ¬åœ°

---

## æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šè¿æ¥æ•°æ®åº“å¤±è´¥

**ç—‡çŠ¶**ï¼šåº”ç”¨å¯åŠ¨å¤±è´¥ï¼Œæç¤ºæ•°æ®åº“è¿æ¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `DATABASE_URL` ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤æ•°æ®åº“å¯†ç æ­£ç¡®
3. æ£€æŸ¥Supabaseé¡¹ç›®æ˜¯å¦æ­£å¸¸è¿è¡Œ
4. æŸ¥çœ‹Renderåº”ç”¨æ—¥å¿—

### é—®é¢˜2ï¼šæ•°æ®æœªä¿å­˜

**ç—‡çŠ¶**ï¼šæ³¨å†ŒæˆåŠŸåæ•°æ®ä¸¢å¤±

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ä½¿ç”¨çš„æ˜¯PostgreSQLè€Œä¸æ˜¯SQLite
2. æ£€æŸ¥Supabaseæ•°æ®åº“ä¸­æ˜¯å¦æœ‰æ•°æ®
3. æŸ¥çœ‹åº”ç”¨æ—¥å¿—ç¡®è®¤æ•°æ®åº“æ“ä½œ

### é—®é¢˜3ï¼šæ€§èƒ½é—®é¢˜

**ç—‡çŠ¶**ï¼šåº”ç”¨å“åº”ç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æ•°æ®åº“è¿æ¥æ•°
2. ä¼˜åŒ–SQLæŸ¥è¯¢
3. æ·»åŠ æ•°æ®åº“ç´¢å¼•
4. è€ƒè™‘å‡çº§åˆ°ä»˜è´¹è®¡åˆ’

---

## å…è´¹è®¡åˆ’é™åˆ¶

Supabaseå…è´¹è®¡åˆ’é™åˆ¶ï¼š

- **æ•°æ®åº“å­˜å‚¨**: 500MB
- **å¸¦å®½**: 1GB/æœˆ
- **æ–‡ä»¶å­˜å‚¨**: 1GBï¼ˆå¦‚æœä½¿ç”¨Supabase Storageï¼‰
- **APIè°ƒç”¨**: 50,000/æœˆ

å¯¹äºå°å‹é¡¹ç›®ï¼Œè¿™äº›é™åˆ¶é€šå¸¸è¶³å¤Ÿã€‚

---

## å‡çº§è·¯å¾„

å¦‚æœè¶…å‡ºå…è´¹é™åˆ¶ï¼š

1. ç™»å½• [Supabase Dashboard](https://supabase.com/dashboard)
2. ç‚¹å‡» **Settings** â†’ **Billing**
3. é€‰æ‹©åˆé€‚çš„ä»˜è´¹è®¡åˆ’
4. ä»˜è´¹è®¡åˆ’æä¾›æ›´å¤šå­˜å‚¨å’ŒåŠŸèƒ½

---

## å…¶ä»–å…è´¹æ•°æ®åº“é€‰é¡¹

å¦‚æœSupabaseä¸é€‚åˆä½ ï¼Œè¿˜æœ‰ä»¥ä¸‹é€‰æ‹©ï¼š

### 1. Neonï¼ˆæ¨è â­â­â­â­â­ï¼‰
- å®Œå…¨å…è´¹
- æ— æœåŠ¡å™¨PostgreSQL
- è‡ªåŠ¨æ‰©å±•
- ç½‘å€ï¼šhttps://neon.tech

### 2. PlanetScaleï¼ˆMySQLï¼‰
- å…è´¹è®¡åˆ’æœ‰é™åˆ¶
- MySQLæ•°æ®åº“
- ç½‘å€ï¼šhttps://planetscale.com

### 3. Railwayï¼ˆPostgreSQLï¼‰
- $5å…è´¹é¢åº¦
- PostgreSQLæ•°æ®åº“
- ç½‘å€ï¼šhttps://railway.app

---

## æ€»ç»“

âœ… **å·²å®Œæˆ**ï¼š
- æ›´æ–°åº”ç”¨é…ç½®æ”¯æŒSupabase
- æ·»åŠ PostgreSQLé©±åŠ¨
- æäº¤å¹¶æ¨é€ä»£ç åˆ°GitHub

ğŸ“‹ **å¾…å®Œæˆ**ï¼š
- æ³¨å†ŒSupabaseè´¦å·
- åˆ›å»ºSupabaseé¡¹ç›®
- è·å–æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
- åœ¨Renderä¸­é…ç½®ç¯å¢ƒå˜é‡

ğŸš€ **ä¸‹ä¸€æ­¥**ï¼š
1. æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ³¨å†Œå¹¶é…ç½®Supabase
2. ç­‰å¾…Renderè‡ªåŠ¨éƒ¨ç½²å®Œæˆ
3. æµ‹è¯•æ•°æ®åº“è¿æ¥å’ŒåŠŸèƒ½

---

## è”ç³»æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
- Supabaseæ–‡æ¡£ï¼šhttps://supabase.com/docs
- Supabase Discordï¼šhttps://supabase.com/discord
- Renderæ–‡æ¡£ï¼šhttps://render.com/docs

---

**ç¥éƒ¨ç½²æˆåŠŸï¼** ğŸ‰
