# å­—å…¸è®¿é—®é—®é¢˜ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

**é”™è¯¯ä¿¡æ¯**ï¼š
```
PDFç”Ÿæˆå¤±è´¥ï¼š'dict' object has no attribute 'heir_info'
```

## é—®é¢˜åŸå› 

åœ¨ä»£ç ä¸­ï¼Œ`will.assets_data` æ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹ï¼ˆdictï¼‰ï¼Œä½†ä»£ç ä½¿ç”¨äº†å¯¹è±¡å±æ€§è®¿é—®æ–¹å¼ï¼ˆç‚¹å·è®¿é—®ï¼‰æ¥è®¿é—®å­—å…¸çš„é”®ã€‚

**é”™è¯¯çš„è®¿é—®æ–¹å¼**ï¼š
```python
will.assets_data.heir_info  # âŒ é”™è¯¯ï¼šè¿™æ˜¯å¯¹è±¡å±æ€§è®¿é—®æ–¹å¼
```

**æ­£ç¡®çš„è®¿é—®æ–¹å¼**ï¼š
```python
will.assets_data['heir_info']  # âœ… æ­£ç¡®ï¼šè¿™æ˜¯å­—å…¸é”®è®¿é—®æ–¹å¼
```

## ä¿®å¤å†…å®¹

### 1. utils/pdf_generator.py

**ä¿®æ”¹å‰**ï¼š
```python
if will.assets_data and will.assets_data.get('heir_info'):
    story.append(Paragraph("<b>æŒ‡å®šç»§æ‰¿äººä¿¡æ¯ï¼š</b>", body_style))
    story.append(Paragraph(will.assets_data.heir_info, body_style))  # âŒ é”™è¯¯
    story.append(Spacer(1, 0.2 * inch))

if will.assets_data and will.assets_data.get('special_notes'):
    story.append(Paragraph("<b>ç‰¹åˆ«è¯´æ˜ï¼š</b>", body_style))
    story.append(Paragraph(will.assets_data.special_notes, body_style))  # âŒ é”™è¯¯
    story.append(Spacer(1, 0.3 * inch))
```

**ä¿®æ”¹å**ï¼š
```python
if will.assets_data and will.assets_data.get('heir_info'):
    story.append(Paragraph("<b>æŒ‡å®šç»§æ‰¿äººä¿¡æ¯ï¼š</b>", body_style))
    story.append(Paragraph(will.assets_data['heir_info'], body_style))  # âœ… æ­£ç¡®
    story.append(Spacer(1, 0.2 * inch))

if will.assets_data and will.assets_data.get('special_notes'):
    story.append(Paragraph("<b>ç‰¹åˆ«è¯´æ˜ï¼š</b>", body_style))
    story.append(Paragraph(will.assets_data['special_notes'], body_style))  # âœ… æ­£ç¡®
    story.append(Spacer(1, 0.3 * inch))
```

### 2. templates/wills/view.html

**ä¿®æ”¹å‰**ï¼š
```jinja2
{% if will.assets_data and will.assets_data.get('heir_info') %}
<div class="mb-4">
    <h5>æŒ‡å®šç»§æ‰¿äººä¿¡æ¯</h5>
    <div class="card bg-light">
        <div class="card-body">
            <p class="mb-0">{{ will.assets_data.heir_info }}</p>  <!-- âŒ é”™è¯¯ -->
        </div>
    </div>
</div>
{% endif %}

{% if will.assets_data and will.assets_data.get('special_notes') %}
<div class="mb-4">
    <h5>ç‰¹åˆ«è¯´æ˜</h5>
    <div class="card bg-light">
        <div class="card-body">
            <p class="mb-0">{{ will.assets_data.special_notes }}</p>  <!-- âŒ é”™è¯¯ -->
        </div>
    </div>
</div>
{% endif %}
```

**ä¿®æ”¹å**ï¼š
```jinja2
{% if will.assets_data and will.assets_data.get('heir_info') %}
<div class="mb-4">
    <h5>æŒ‡å®šç»§æ‰¿äººä¿¡æ¯</h5>
    <div class="card bg-light">
        <div class="card-body">
            <p class="mb-0">{{ will.assets_data['heir_info'] }}</p>  <!-- âœ… æ­£ç¡® -->
        </div>
    </div>
</div>
{% endif %}

{% if will.assets_data and will.assets_data.get('special_notes') %}
<div class="mb-4">
    <h5>ç‰¹åˆ«è¯´æ˜</h5>
    <div class="card bg-light">
        <div class="card-body">
            <p class="mb-0">{{ will.assets_data['special_notes'] }}</p>  <!-- âœ… æ­£ç¡® -->
        </div>
    </div>
</div>
{% endif %}
```

## Pythonå­—å…¸è®¿é—®æ–¹å¼è¯´æ˜

### 1. ä½¿ç”¨æ–¹æ‹¬å·è®¿é—®é”®ï¼ˆæ¨èï¼‰
```python
data = {'key': 'value'}
result = data['key']  # ç›´æ¥è®¿é—®
```

### 2. ä½¿ç”¨getæ–¹æ³•è®¿é—®é”®ï¼ˆæ›´å®‰å…¨ï¼‰
```python
data = {'key': 'value'}
result = data.get('key')  # å®‰å…¨è®¿é—®ï¼Œé”®ä¸å­˜åœ¨æ—¶è¿”å›None
result = data.get('key', 'default')  # å¯ä»¥æŒ‡å®šé»˜è®¤å€¼
```

### 3. ä½¿ç”¨ç‚¹å·è®¿é—®ï¼ˆä»…é€‚ç”¨äºå¯¹è±¡ï¼Œä¸é€‚ç”¨äºå­—å…¸ï¼‰
```python
# âŒ é”™è¯¯ï¼šdictå¯¹è±¡ä¸èƒ½ä½¿ç”¨ç‚¹å·è®¿é—®
data = {'key': 'value'}
result = data.key  # æŠ¥é”™ï¼šAttributeError

# âœ… æ­£ç¡®ï¼šå¯¹è±¡å¯ä»¥ä½¿ç”¨ç‚¹å·è®¿é—®
class MyObject:
    def __init__(self):
        self.key = 'value'

obj = MyObject()
result = obj.key  # æ­£ç¡®
```

## æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯1ï¼šåˆ›å»ºåŒ…å«ç»§æ‰¿äººä¿¡æ¯å’Œç‰¹åˆ«è¯´æ˜çš„é—å˜±

**æ­¥éª¤**ï¼š
1. åˆ›å»ºæ•°å­—é—å˜±
2. å¡«å†™ç»§æ‰¿äººä¿¡æ¯
3. å¡«å†™ç‰¹åˆ«è¯´æ˜
4. é€‰æ‹©ä¸€äº›èµ„äº§å¹¶æŒ‡å®šå¤„ç†æ–¹å¼
5. ç‚¹å‡»"ä¸‹è½½PDF"

**é¢„æœŸç»“æœ**ï¼š
- âœ… PDFæ–‡ä»¶æˆåŠŸç”Ÿæˆ
- âœ… PDFåŒ…å«ç»§æ‰¿äººä¿¡æ¯
- âœ… PDFåŒ…å«ç‰¹åˆ«è¯´æ˜
- âœ… PDFåŒ…å«èµ„äº§å¤„ç†è¡¨æ ¼
- âœ… PDFåŒ…å«å¹³å°æ”¿ç­–å’Œæ³•å¾‹æç¤º

### æµ‹è¯•åœºæ™¯2ï¼šåˆ›å»ºä¸åŒ…å«ç»§æ‰¿äººä¿¡æ¯å’Œç‰¹åˆ«è¯´æ˜çš„é—å˜±

**æ­¥éª¤**ï¼š
1. åˆ›å»ºæ•°å­—é—å˜±
2. ä¸å¡«å†™ç»§æ‰¿äººä¿¡æ¯
3. ä¸å¡«å†™ç‰¹åˆ«è¯´æ˜
4. é€‰æ‹©ä¸€äº›èµ„äº§å¹¶æŒ‡å®šå¤„ç†æ–¹å¼
5. ç‚¹å‡»"ä¸‹è½½PDF"

**é¢„æœŸç»“æœ**ï¼š
- âœ… PDFæ–‡ä»¶æˆåŠŸç”Ÿæˆ
- âœ… PDFä¸æ˜¾ç¤ºç»§æ‰¿äººä¿¡æ¯éƒ¨åˆ†ï¼ˆå› ä¸ºæ²¡æœ‰å¡«å†™ï¼‰
- âœ… PDFä¸æ˜¾ç¤ºç‰¹åˆ«è¯´æ˜éƒ¨åˆ†ï¼ˆå› ä¸ºæ²¡æœ‰å¡«å†™ï¼‰
- âœ… PDFä»ç„¶åŒ…å«èµ„äº§å¤„ç†è¡¨æ ¼
- âœ… PDFä»ç„¶åŒ…å«å¹³å°æ”¿ç­–å’Œæ³•å¾‹æç¤º

## ä¿®å¤çš„æ–‡ä»¶

1. `utils/pdf_generator.py` - ä¿®å¤PDFç”Ÿæˆä¸­çš„å­—å…¸è®¿é—®
2. `templates/wills/view.html` - ä¿®å¤æŸ¥çœ‹é¡µé¢ä¸­çš„å­—å…¸è®¿é—®

## å½±å“èŒƒå›´

**å—å½±å“çš„åŠŸèƒ½**ï¼š
- æ•°å­—é—å˜±PDFç”Ÿæˆ
- æ•°å­—é—å˜±æŸ¥çœ‹é¡µé¢

**ä¸å—å½±å“çš„åŠŸèƒ½**ï¼š
- æ•°å­—é—å˜±åˆ›å»º
- æ•°å­—é—å˜±åˆ—è¡¨
- æ•°å­—é—å˜±åˆ é™¤
- å…¶ä»–æ‰€æœ‰åŠŸèƒ½

## éªŒè¯æ–¹æ³•

### 1. æ£€æŸ¥ä»£ç 
```bash
# æœç´¢å¯èƒ½å­˜åœ¨çš„é—®é¢˜
Select-String -Path "*.py" -Pattern "\.heir_info|\.special_notes"
Select-String -Path "*.html" -Pattern "\.heir_info|\.special_notes"
```

### 2. åŠŸèƒ½æµ‹è¯•
1. åˆ›å»ºä¸€ä¸ªåŒ…å«ç»§æ‰¿äººä¿¡æ¯å’Œç‰¹åˆ«è¯´æ˜çš„é—å˜±
2. ç‚¹å‡»"ä¸‹è½½PDF"
3. éªŒè¯PDFèƒ½å¤ŸæˆåŠŸç”Ÿæˆå’Œä¸‹è½½
4. æ‰“å¼€PDFæ–‡ä»¶ï¼Œæ£€æŸ¥å†…å®¹æ˜¯å¦å®Œæ•´

### 3. é”™è¯¯æ—¥å¿—æ£€æŸ¥
æŸ¥çœ‹Flaskæ§åˆ¶å°è¾“å‡ºï¼Œç¡®è®¤æ²¡æœ‰é”™è¯¯ä¿¡æ¯ï¼š
```
PDF generated successfully: temp_pdfs/will_X_YYYYMMDD_HHMMSS.pdf (Size: XXXX bytes)
```

## æ€»ç»“

### é—®é¢˜æ ¹æº
æ··æ·†äº†å­—å…¸å’Œå¯¹è±¡çš„è®¿é—®æ–¹å¼ï¼š
- å­—å…¸ä½¿ç”¨ `dict['key']` æˆ– `dict.get('key')`
- å¯¹è±¡ä½¿ç”¨ `object.key`

### è§£å†³æ–¹æ¡ˆ
å°†æ‰€æœ‰é”™è¯¯çš„ç‚¹å·è®¿é—®æ–¹å¼æ”¹ä¸ºæ­£ç¡®çš„å­—å…¸é”®è®¿é—®æ–¹å¼ã€‚

### ä¿®å¤æ•ˆæœ
- âœ… PDFç”ŸæˆåŠŸèƒ½æ¢å¤æ­£å¸¸
- âœ… é—å˜±æŸ¥çœ‹é¡µé¢æ­£å¸¸æ˜¾ç¤º
- âœ… æ‰€æœ‰ç›¸å…³åŠŸèƒ½éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨

**é—®é¢˜å·²å®Œå…¨ä¿®å¤ï¼** ğŸ‰
